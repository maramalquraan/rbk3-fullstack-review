"use strict";function t(t,r){return N(j,r),e(t,function(t){r(f(t))})}function e(t,e){N(j,e);var o=new XMLHttpRequest;return r(o,t),n(o,e),u(o),o}function r(t,e){t.params=c(e)}function n(t,e){N(j,e),t.onabort=t.onerror=t.onload=t.ontimeout=e}function o(t){t.upload;var e=t.params,r=e.method,n=e.url,o=e.async,s=e.username,a=e.password;return t.open(r,n,o,s,a),t}function s(t){var e=C(H,t.params.headers);for(var r in e)t.setRequestHeader(r,e[r]);return t}function a(t){var e=t.params.body;return t.send(e),t}function u(t){return t.readyState!==t.UNSENT&&t.readyState!==t.DONE||(o(t),s(t),a(t)),t}function i(t){g(t)&&j(t.abort)&&t.abort()}function p(t){var e=t.getResponseHeader("content-type");return/application\/json/.test(e)?JSON.parse(t.responseText):/html/.test(e)?(new DOMParser).parseFromString(t.responseText,"text/html"):/xml/.test(e)?(new DOMParser).parseFromString(t.responseText,"text/xml"):t.responseText}function c(t){N(D,t),N(T,t.url),t.method&&N(T,t.method);var e=(t.method||"GET").toUpperCase();return P(t,{rawParams:t,method:e,async:!1!==t.async,url:l(t.url,e,t.body),headers:D(t.headers)?t.headers:{},body:m(t.body,e,x(t.headers))})}function f(t){var e=Date.now(),r=t.target,n=t.type,o=r.readyState===r.DONE;return{xhr:r,event:t,params:r.params,complete:o,completedAt:e,reason:n,status:r.status,ok:o?y(r.status):void 0,headers:S(r.getAllResponseHeaders()),body:p(r)}}function d(t){return/get|head|options/i.test(t)}function l(t,e,r){return d(e)&&D(r)?v(t,r):t}function x(t){for(var e in t)if(/content-type/i.test(e))return t[e]}function m(t,e,r){return d(e)?null:/application\/json/.test(r)&&h(t)?JSON.stringify(t):/application\/x-www-form-urlencoded/.test(r)&&D(t)?b(t):t}function h(t){return D(t)||R(t)}function y(t){return t>=200&&t<=299}function v(t,e){var r=b(e);return r?t+(/\?/.test(t)?"&":"?")+r:t}function b(t){var e=[],r=C(H,t);for(var n in r)e.push(encodeURIComponent(n)+"="+encodeURIComponent(r[n]));return e.join("&")}function S(t){var e={};return O(t).map(w).filter(Boolean).forEach(function(t){t[0];var r=t[1],n=t[2];e[r.toLowerCase()]=n}),e}function O(t){return t.split(/$/m)}function w(t){return t.match(/^\s*([^:]+)\s*:\s*(.+)\s*$/m)}function g(t){return null!==t&&"object"==typeof t}function D(t){return g(t)&&E(Object.getPrototypeOf(t))}function E(t){return null===t||t===Object.prototype}function R(t){return t instanceof Array}function T(t){return"string"==typeof t}function j(t){return"function"==typeof t}function N(t,e){if(!t(e))throw Error("Expected "+e+" to satisfy test "+t.name)}function P(t,e){var r={};for(var n in t)r[n]=t[n];for(var o in e)r[o]=e[o];return r}function C(t,e){var r={};for(var n in e)t(e[n],n)&&(r[n]=e[n]);return r}function H(t,e){return M(t)&&M(e)}function M(t){return null!=t&&""!==t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Xhttp=t,exports.Xhr=e,exports.xhrInitParams=r,exports.xhrSetMultiCallback=n,exports.xhrOpen=o,exports.xhrSendHeaders=s,exports.xhrSendBody=a,exports.xhrStart=u,exports.xhrDestroy=i,exports.xhrGetDecodedResponseBody=p,exports.parseParams=c,exports.eventToResponse=f,exports.isJSONEncodable=h,exports.isStatusOk=y,exports.headersToDict=S;